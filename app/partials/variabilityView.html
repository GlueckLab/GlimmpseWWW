<!doctype html>
<!--
* GLIMMPSE (General Linear Multivariate Model Power and Sample size)
* Copyright (C) 2013 Regents of the University of Colorado.
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-->
<script>
    $(function() {
        $( "#variability-tabs" ).tabs();
    });
</script>

<h3>  Within Participant Variability
</h3>

<p>
    For a given research participant, responses vary across response variables and across repeated measurements .
    The amount of variability can dramatically impact power and sample size. Click on each of the tabs below to describe the varibility
    you expect to observe for the response variables and each within-participant factor.
</p>

   <div id="variability-tabs" ng-show="studyDesign.repeatedMeasuresTree.length > 0">
       <ul>
           <li>
               <a href="#measure-tab">measure</a></li>
           <li><a href="#responses-tab" class="active">Responses</a></li>
       </ul>


               <div id="measure-tab" class="input-group">

                   <div ng-show="studyDesign.covariance[1].type == 'LEAR_CORRELATION'"
                        class="input-group">
                       <h3>
                           Structured Correlation: The Linear Exponential Auto-Regressive Model
                           (LEAR, Simpson et al., 2010)
                       </h3>

                       <p>
                            The LEAR model describes correlation which monotonely decreases with distance
                           between repeated measurements. The model has two correlation parameters,
                           the base correlation and the decay rate. The base correlation describes the
                           correlation between measurements taken 1 unit apart. The decay rate describes
                           the rate of decrease in the base correlation as the distance or time between
                           repeated measurements increases. Our experience with biological and behavioral
                           data lead us to suggest using decay values between 0.05 and 0.5.
                       </p>

                       <ng-resizable-matrix ng-model="sigmaEMatrix" rowresizable='false' columnresizable='false'
                                            symmetric='true' editdiagonal='true' editoffdiagonal='true'
                                            rowlabels='' columnlabels='' ></ng-resizable-matrix>

                       <table>
                           <tr>
                               <td>
                                   Base Correlation
                               </td>

                               <td>
                                   <input type="text" value="">
                                   </input>
                               </td>
                           </tr>
                           <tr>
                               <td>
                                   Decay Rate
                               </td>

                               <td>
                                   <input type="text" value="">
                               </td>
                           </tr>
                       </table>
                   </div>

                   <div class="input-group">
                       <table>
                           <tr>
                               <td>

                               </td>
                               <td ng-repeat="measurement in measure.numberOfMeasurements in
                               studyDesign.repeatedMeasuresTree>

                                   {{measure.dimension}},{{measurement}}

                               </td>
                           </tr>
                           <tr ng-repeat="measurement in measure.numberOfMeasurements">
                               <td>
                                   {{measure.dimension}},{{measurement}}
                               </td>
                               <td ng-repeat="measurement in measure.numberOfMeasurements">
                                   <input type="text" value="1">
                                   </input>
                               </td>
                           </tr>
                       </table>
                   </div>
                   <button value="Unstructured correlation" ng-click="chooseRMCorrelations()"
                       ng-show="studyDesign.covariance[1].type == 'LEAR_CORRELATION'">
                       Unstructured correlation
                   </button>
                   <button value="LEAR correlation" ng-click="chooseRMCorrelations()"
                       ng-show="studyDesign.covariance[1].type == 'UNSTRUCTURED_CORRELATION'">
                       Structured correlation
                   </button>
                </div>

       <div id="responses-tab" class="input-group">
           <div ng-show="studyDesign.covariance[0].type == 'UNSTRUCTURED_CORRELATION'"
                class="input-group">
               <p>
                   Enter the standard deviation you expect to observe for each response.
                   Note that GLIMMPSE currently assumes that the standard deviation is
                   constant across repeated measurements.
               </p>
               <table>
                   <tr ng-repeat="response in studyDesign.responseList">
                       <td>
                           {{response.name}}
                       </td>
                       <td>
                           <input type="text" value="1">
                           </input>
                       </td>
                   </tr>
               </table>
           </div>

           <div class="input-group">
               <p>
                   Enter the correlations you expect to observe between the responses
                   when observed at the same time (location, etc.)
               </p>
               <table>
                   <tr>
                       <td>
                       </td>
                       <td ng-repeat="response in studyDesign.responseList">
                           {{response.name}}
                       </td>
                   </tr>
                   <tr ng-repeat="response in studyDesign.responseList">
                       <td>
                           {{response.name}}
                       </td>
                       <td ng-repeat="response in studyDesign.responseList">
                           <input type="text" value="1">
                           </input>
                       </td>
                   </tr>
               </table>
           </div><br>
           <button value="Unstructured covariance" ng-click="chooseVariabilityType()"
                ng-show="studyDesign.covariance[0].type == 'UNSTRUCTURED_CORRELATION'">
               Unstructured covariance
           </button>
           <button value="Unstructured correlation" ng-click="chooseVariabilityType()"
                ng-show="studyDesign.covariance[0].type == 'UNSTRUCTURED_COVARIANCE'">
               Unstructured correlation
           </button>
       </div>
   </div>


